少就是多) Ruby on Rails 简介
翻译自Creating More Using Less Effort with Ruby on Rails by MICHAEL SLATER
如果你开发网站，想必应该听过Ruby on Rails (RoR)的大名。但是如果是网页设计师或前端工程师，或除了PHP没有用过其他框架，那么采用Ruby on Rails方案似乎会是一个很大的改变。在这篇文章中，我希望能够除去Ruby on Rails神秘的面纱，并说服你采取行动，这将会非常值得如果你的需求符合下述的Ruby on Rails甜蜜点。

学新方法去做本来就会做的事情，还要同时学新观念和新技巧,确实会花你一点时间。直接了当地说，即使是Ruby on Rails，转换技术都将会摧毁你的生产力。然而，我相信网站开发者如果开始采用Ruby on Rails，将变得更有生产力做出更好的网站，以及从中获得更多的乐趣。

Rails乐趣
Ruby on Rails(简称Rails)是一个完整的框架，意思是说他包含了前端跟后端。它让“要做多种不同工作的人” 开发者能拥有极强有力的工具。即使基本上你只是前端或后端工程师，你仍可以有效率的使用Ruby on Rails。我们可以清楚定义前端(浏览器HTML、CSS和JavaScript)和后端(Ruby和Rails框架)的介面，所以如果你只想要专注在其中一端的话，不需要全盘了解。

如果你是网页设计师或前端工程师，你会学到如何使用Ruby on Rails 样板系统，而​​且学一点内嵌Ruby程式码在View 档案。这将让你成为后端开发者更好的伙伴，因为你可以直接操作Rails 应用程式，而不是让某人去整合HTML和CSS。

因此无论你用前端或后端工程师的角度采用Ruby on Rails，可以想想看有哪些专案可以考虑采用？

甜蜜点
Ruby on Rails是Basecamp、Blinksale、43Things、Odeo、Revolution Health、Twitter、YellowPages.com和A List Apart这些网页应用程式和网站的核心。这股Rails热情也扩展到许多大网路公司。Yahoo、eBay、Amazon和AOL都有Ruby on Rails专案，而ThoughtWorks也正在建立Rails企业级应用程式。但是这么多不同的Ruby on Rails应用程式，有几个重要的共通最适关键。

当一个网站或网路服务有以下三个特点的时候，最适合采用Ruby on Rails 方案：

一个资料库形式的网站（译注：一个透过存取资料库，动态产生内容的网站) 或有足够规模到适合使用一个强大功能的框架。
一个特别而不适用于传统的CMS 系统(如果Joomla 或Durpal 完全符合你所需，这些系统会是更好的选择）。
一个全新的应用，允许开发人员开始全新的资料库跟软体架构。
这些是Ruby on Rails 应用程式的甜蜜点。应用程式如有这些特性，一旦决定投入学习Rails，采用RoR 将很可能会比PHP、.NET或Java 开发的更快速。
生产力爆增
一个最主要的理由就是Ruby on Rails 增加生产力：建立新的应用程式、增加新功能变成容易地多。结合程式语言(Ruby)和框架(Rails)意指你将可以用更少程式码。更少的程式和更好的架构表示当要改变时相对无痛，所以你可以迭代和实验更乐意。这将带我们有更好的网站，而且怀希望地更有乐趣去建构网站。

当然，采用主要的新工具需要时间的投资，一时没办法轻松。如果你正专注在一专案，可能不是很适合。但是如果你需要持续建构网站，而且是有一定程度的复杂，一个短期学习Ruby on Rails 的投资，长期来说将会是值得的。

要了解我会为什么相信你可以用Ruby on Rails 做更多事且写更少程式，让我们快速看一下Ruby。

遇见Ruby
Ruby 是个现代的物件导向语言。在任何Ruby 程式里，所有东西都是物件。Ruby也是一个动态语言，这表示：

Ruby 被动态直译(就像PHP)，所以没有编译(像C或Java)。这加速了迭代式开发。在Ruby里，变数被使用的时候才被动态指定一个型别，降低了在其他程式语言必须定义跟设定变数。一个Ruby程式可以动态产生程式，修改即使正在执行的自己。Rails内部就使用这个能力，来让你可以简单享受所谓的"Magic"。(你不需要了解到底这个技巧如何运作)

Ruby 是一个读写非常美妙简洁的语言，但是他的优点不只如此。正因为Ruby可以被强力扩展，Rails框架才可以将他转换成像是建造网站应用程式的专用语言。

Ruby(语言)和Rails(框架)是两回事，他们彼此在很多地方相辅相成。所有Ruby on Rails 应用程式由Ruby写成，而Ruby的特性带给Ruby on Rails很大的影响。有些框架，像是CakePHP，带了很多Rails 点子过去。但是Ruby的能力和弹性给了Rails比许多别的框架更多清楚和弹性。如果你正打算投资学习一个框架，学习Ruby并不会是很大的障碍，而且回报相当可观。

Rails 方案
许多网站并没有使用任何应用框架：你就写你要的程式和尽可能到处复制贴上你所需的程式。对小网站来说这ok，但是很快你就会失去控制，乱七八糟的程式码将很难理解与维护。

使用像Ruby on Rails 这样的框架，很多关于如何组织你的程式码的决定早就已经为你想好了，而且还有一堆可供挑选使用的函式库。

另一个重要的Rails特性是使用model-view-controller (MVC) 结构来组织每一个应用。MVC 是一个组织软体专案的良好设计模式，当你有很多网站或有新人加入工作时，它将带给你程式码一致性的结构。它提供个别独立的档案，有着干净的介面可以分开前端与后端的开发者。

资料库与物件
Ruby on Rails 被设计成用来建构资料库应用程式，其中许多核心元件专注在与资料库的互动。Rails的核心函式库称作Active Record，它实做了被称作物件-关联对应(ORM)。有了ORM，你可以操作代表资料的软体物件，然后Active Record 函式库将会处理与资料库的操作。

这听起来可能有点抽象神秘，让我们更具体些。即使不知道任何Ruby 或任何物件导向语言，我打赌你也可以对下列的程式码范例有感觉，以下是实际的Ruby on Rails 程式码。

假设你有一个书店网站，你想要加入一本新书。你可以这样写：

newbook = Book.new
你正告诉这个"Book" 类别你要一个空的book 物件，称作"newbook"。你可以设定标题或任何其他属性，直观如下：

newbook.title = "Angle of Repose" newbook.author = "Wallace Stegner"
在这同时，你有一个物件在记忆体。这时你需要的是：

newbook.save
...然后你的新书将会被写入资料库。Active Record 产生SQL 告诉资料库插入一笔资料。你还可以只用少少几行的程式码就可以做栏位检查，并产生错误讯息。

现在你想要在成千上万中的资料库找那本书。只要写：

angle_of_repose = Book.find_by_title "Angle of Repose"
...于是你得到物件被称作"angle_of_repose"，它有着所有从资料库捞出来的资料。

当然还有更多，不过也不会太多了; 操作对应网站资料的软体物件是如此自然有威力的方式。在RoR，你有丰富的软体物件对应到你的资料库表格，这些物件被组合成MVC 系统中的"model" 层。

你的程式码与model 物件互动，然后Active Record 产生SQL 让资料库如你所写。你不需要撰写任何资料库SQL语法。正因为不需要让你的程式与资料库直接沟通，你也可以透过更改设定轻松更换资料库软体。

VIEWS 和CONTROLLERS
要建立网页，Rails 提供样本系统可以轻易地使用一致的网页结构，插入相同的元件不需要重复程式码，展示来自资料库的资料，显示并处理表单。这些样板组成MVC系统的"view" 层。

如果你是前端开发者，这是Rails 中你应该特别专注的部份。你可以简单假设你的"view" 档案将会处理任何你要显示出来的资料变数。正如同PHP 档案混合了PHP 程式码和HTML，一个典型的Rails view 也是混合了Ruby 和HTML。继续我们的书店范例，这里是一段view 程式码显示书的标题和作者：

<h1><%= book.title %></h1> <p><%= book.author %></p>
Ruby 程式码被标记成<%= and %>; 其余则是HTML。HTML和Ruby程式码的输出结合后，建立出网页。

Rails被整合成支援Prototype和Scriptaculous Javascript函式库，再加上一个称作Ruby JavaScript(RJS)用来建构Ajax使用者介面的厉害机制。你可以用Ruby几乎完全所有事情，包括最终被执行在浏览器的Javascript程式码(Rails框架会处理这些转换)

一个"controller" 是一整块Ruby程式码用来与Model 沟通，并准备资料给view。任何view所需的资料都会先在controller 用一组变数所组成。这个controller 也在页面载入好以后回应Ajax 的需求。Controller 也提供多种其他功能，从使用者认证到错误处理等。

惯例胜于设定(Convention over Configuration)
Rails 试图努力对任何事情都去提供一个合理的预设值。根据这个称作惯例胜于设定的哲学，Rails 大大降低了设定档的需要。

如果你依照Rails的惯例，将会有令人惊艳的成果，从路由request对应到正确的controller 和view，到验证表单资料和显示错误讯息，都可以直接运作。与其他语言和框架比较起来，它使用了更少程式去达到更多常见的任务。

惯例胜于设定的方式对初学者可能会有点挫折，特别是如果是从一个已经存在的应用程式开始用起​​，因为会有隐藏的假设藏在程式码里面。这些假设会让程式简洁，但是当你不知道的时候也会造成困惑。但当你学习Rails惯例之后，Rails的所有事情就会变成有意义了。一旦当你建构全新的网站时，你将如虎添翼般，因为有这么多已经为你定义好的东西。

它并不完美
Rails 的确有它的缺点。当应用程式满足上述的甜蜜点时，这些缺点可以被忽略不计，但是在极端情况却是很大的问题。

Ruby 比大多数其他程式语言还来的慢。当然这几年将会改善，但是他对少数应用程式来说这是一个缺点，的确是个问题。不过实际上对绝大多数的网站这并不是问题所在。

对MVC 框架的架空使用也将拖慢速度。仔细看大多数的Rails应用都执行良好，但是很多Model 操作都可以经由调校降低对资料库的存取次数。你常常可以彻底地降低资料库操作：Rails 包含了强而有利的快取系统，常常被存取的网页可以只被建立一次，然后被读取很多次。

Rails应用程式也常常在hosting比PHP碰到更多的麻烦。因为Rails框架程式大小的关系，它需要一直使用记忆体，而不是只在有request的时候。你需要100-200MB的专用记忆体来维持一个低流量的Rails应用。对比的PHP则可以在一台机器里跑上上百的应用，因为他们不需要占据任何记忆体直到被存取。(译注：这个局面已改变，请参考mod_rails )

因为那些伺服器需求，共用Hosting 通常对Rails 应用问问多多。一VPS(虚拟专用伺服器)通常是最佳的选择。设定一台Rails伺服器比起PHP是复杂许多。这在一两年前也许是个大问题，不过现在有许多hosting 公司已经对Rails 提供专门的解决方案。

这些伺服器的要求也导致Ruby on Rails hosting倾向比起其他平台和语言成本更昂贵些。如果你符合Rails的甜蜜点，相对于比起使用Rails得到的好处，你的网站应当足够重要到可以负担这些增加的hosting费用。

学习曲线
Rails 的复杂让初学者比较难以开始：它需要花几个月的时间来熟悉Rails全部。但是你可以先从学习如何打造一个基本的Rails网站。一旦你开始采用，你将逐渐补齐所需要的技能和知识。

建构网站的开发者来自四方八方不同背景，大部分可以分成两类：

有点子建构网站，而且只想学习刚刚好足够多的技术。
看见网站就像看见程式的程式设计师。
Ruby on Rails 由程式设计师建构，也是为了写给程式设计师使用。所以如果你来自专业软体开发背景，它将会比来自于网页设计领域更容易熟悉。

如果你不是软体设计师，将有更多东西要学，但也不是不可能。学习一部分的Ruby，学点物件导向程序，那么了解Rails也不会太困难。要使用Rails建构网站你只需要具备有限的一小部分的Ruby 能力即可。

你可以不需要运作在框架里面的进阶Ruby技巧。你不需要了解Rails内部运作，或内部技术(例如metaprogramming)。

Rails 系统的许多实做技术来自于软体开发领域，包括使用原始码管理系统，一个自动测试框架，文件工具，和布署工具。如果你正在做点对点式(ad-hoc)的网站开发，这些也许是陌生的观念，但是一旦你开始熟悉，它将让你的工作生涯更健全。

该学什么
学习Rails的奥秘在于知道什么是你学习一开始可以忽略的东西，如此你才可以先在一段时间内牢记所知，而不是一次就用眼花撩乱的技术来构成Rails应用(一个学习开端是利用此文作者的Ruby on Rails 免费线上课程）

开始学习基本的Ruby。你不需要学太深，但是要有效率的开发Rails你必须知道这些基本的东西。Rails 看起来有点像标记语言(markup)，它也试图这样想，但你必须了解到网站并不是一组网页档案，而是由程式来产生网页。

如果你专注在前端，学习如何layout, view 样板，还有局部样板(partials)是如何运作的。如果你是专注在后端开发，它将关注在model 和controller 层而并提供view 所需要的变数。

一开始，你可以忽略Ajax; 它是一个可以大大改善使用者经验的另一层技术，但是它真的不是必要的。所以当你学习Rails 的时候可以先把RJS, Prototype 和Scriptaculous 放一边。当你已经会基本东西之后，再来加入新潮的Ajax 功能。

如果你是后端开发者，专注在学习如何塑模你的应用领域成为一组资源，建立你的资料库表格，然后使用物件。Rails 框架既广且深，所以你将持续花时间学习，但是一开始你不需要太多。

当你正在学习Rails，你可以忽略测试和其相关的复杂东西，即使它在Rails 的讨论中非常值得关注。当你更进一步，回来在做即可。不要让这些东西拖慢你一开始的学习或是增加你的认知负担。

换你上场了!
一旦你准备好要加速了，Ruby on Rails 将变成一位老朋友。你的手指尖有着满满的工具，你将有着前所未有的生产效率。用更少程式码做更多事情，你将乐于其中建构出更好的网站。不会再回头了。

原文插图来自Kevin Cornell

关于作者
Michael Slater是Collective Knowledge Works, Inc.的老板，这家公司建立知识社群平台。他同时也是Learning Rails free online course的共同创办人和BuildingWebApps.com的编辑主任。

关于译者
张文钿(aka ihower )于May 23rd, 2008

Translated with the permission of A List Apart Magazine and the author[s].